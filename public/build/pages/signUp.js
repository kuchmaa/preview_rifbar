import{g as r}from"../chunks/DOM.js";import{a as s,c as m,V as h,d as k,p as y}from"../chunks/event.js";(()=>{var f=r("error");const u=r("form"),g=r("name"),b=r("email"),E=r("phone"),l=r("pass"),n=r("varyfPass"),c=r("submit"),i=s(g,{callback:(a,e)=>e,errorCallback:a=>a.length<1&&"Type name"}),o=s(b,{callback:(a,e)=>e,errorCallback:a=>!m({type:h.email,value:a})&&"Invalid email"}),p=s(E,{callback:(a,e)=>(a=a.replaceAll(" ",""),e=e.replaceAll(" ",""),isNaN(e)?a.replace(/^(\d{3})(\d{3})(\d{4})(.*)$/,"$1 $2 $3$4"):e.replace(/^(\d{3})(\d{3})(\d{4})(.*)$/,"$1 $2 $3$4")),errorCallback:a=>!m({type:h.phone,value:a.replaceAll(" ","")})&&"Invalid phone"}),t=k(l,n,{pass:l.getElementsByClassName("showPass")[0],confirm:n.getElementsByClassName("showPass")[0]});u.addEventListener("submit",y(()=>{c.disabled=!0,i.checkError()&&o.checkError()&&p.checkError()&&t.passHandler.checkError()&&t.confirmHandler.checkError()&&fetch("/register",{method:"POST",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content"),"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({name:i.getValue(),email:o.getValue(),phone:p.getValue(),password:t.passHandler.getValue(),password_confirmation:t.confirmHandler.getValue()})}).then(async e=>{if(!e.ok){const d=await e.json().catch(()=>({}));throw console.error("Validation errors:",d),d}window.location.href="/dashboard"}).catch(e=>{e.errors.email?o.setError(!0,e.message):f.innerText="Unexpected error, try again later",c.disabled=!1})}))})();
